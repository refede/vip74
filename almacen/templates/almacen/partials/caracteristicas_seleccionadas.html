<!-- Este div contendrá los inputs ocultos actualizados -->
<div id="hidden-caracteristicas">
{% for c in caracteristicas_seleccionadas %}
    <input type="hidden" name="caracteristicas" value="{{ c.id }}" checked>
{% endfor %}
</div>

<!-- Y aquí mostramos las "píldoras" visuales -->
{% for c in caracteristicas_seleccionadas %}
    <span class="badge bg-primary">
        {{ c.nombre }}
        <button type="button" class="btn-close btn-close-white ms-2"
                hx-post="{% url 'almacen:deseleccionar_caracteristica' %}"
                hx-vals='{"caracteristica_id": "{{ c.id }}"}'
                hx-include="[name='caracteristicas']"
                hx-target="#container-caracteristicas"
                hx-swap="outerHTML">
        </button>
    </span>
{% endfor %}
{% if not caracteristicas_seleccionadas %}
    <small class="text-muted">Ninguna seleccionada.</small>
{% endif %}